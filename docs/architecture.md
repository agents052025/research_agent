# Архітектура дослідницького агента

## Загальний огляд

Дослідницький агент - це модульна система, побудована на фреймворку SmolaGents, призначена для автоматизованого збору, аналізу та синтезу інформації. Система підтримує багатомовність (українська та англійська) і оптимізована для глибокого аналізу даних.

## Ключові компоненти

```
research_agent/
├── agent/                    # Основні компоненти агента
│   ├── research_agent.py     # Головний клас агента
│   ├── improved_prompt.py    # Удосконалені шаблони інструкцій
│   └── simple_research_agent.py   # Спрощена версія агента
├── core/                     # Ядро системи
│   ├── research_planner.py   # Планування дослідження
│   └── context_manager.py    # Управління контекстом
├── tools/                    # Інструменти для дослідження
│   ├── search_tool.py        # Пошуковий інструмент
│   ├── url_fetcher_tool.py   # Інструмент завантаження URL
│   ├── pdf_reader_tool.py    # Інструмент читання PDF
│   ├── data_analysis_tool.py # Інструмент аналізу даних
│   ├── visualization_tool.py # Інструмент візуалізації
│   └── database_tool.py      # Інструмент роботи з базою даних
└── utils/                    # Допоміжні модулі
    ├── language_strings.py   # Багатомовні рядки
    └── results_enhancer.py   # Покращення результатів
```

## Послідовність роботи

1. **Ініціалізація**: Завантаження конфігурації та створення інструментів
2. **Планування**: Розробка плану дослідження на основі запиту користувача
3. **Виконання**: Послідовне виконання кроків дослідження з використанням інструментів
4. **Синтез**: Об'єднання зібраної інформації в структурований звіт
5. **Збереження**: Запис результатів у базу даних та файл

## Діаграма потоку даних

```
[Запит користувача] --> [Визначення мови]
                     --> [Планування дослідження]
                     --> [Пошук інформації] --> [BraveSearch API / Serper API]
                     --> [Завантаження вмісту] --> [Аналіз PDF / Web-контенту]
                     --> [Аналіз даних]
                     --> [Формування висновків]
                     --> [Генерація звіту]
                     --> [Зберігання результатів]
```

## Особливості архітектури

1. **Модульний дизайн**: Кожен компонент виконує свою функцію і може бути вдосконалений незалежно
2. **Розширюваність**: Легке додавання нових інструментів та функціональності
3. **Мовна гнучкість**: Вбудована підтримка кількох мов з автоматичним розпізнаванням
4. **Глибокий аналіз**: Режим "deep" для грунтовного дослідження теми
5. **Робастність**: Механізми резервного копіювання та альтернативні шляхи (наприклад, використання резервних API)

## Технології

- **SmolaGents**: Базовий фреймворк для агентів
- **LiteLLM**: Інтерфейс для роботи з LLM
- **BraveSearch API**: Основний пошуковий движок (особливо для українських запитів)
- **Serper API**: Резервний пошуковий движок
- **SQLite**: Локальне зберігання даних
